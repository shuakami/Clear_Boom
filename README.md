# ClearBOOM ( >_< )

[![Version](https://img.shields.io/badge/version-1.0.0-blue.svg)](https://github.com/yourusername/ClearBOOM)
[![Python](https://img.shields.io/badge/python-3.10+-blue.svg)](https://www.python.org)
[![License](https://img.shields.io/badge/license-MIT-green.svg)](LICENSE)
[![Windows](https://img.shields.io/badge/platform-Windows-lightgrey.svg)](https://www.microsoft.com/windows)

**ClearBOOM** 是一个智能的Windows下载文件夹管理助手。它能自动监控你的下载文件夹，将不同类型的文件分类整理到对应的文件夹中。最贴心的是，它会给你3小时的缓冲时间，让你能充分使用刚下载的文件，再进行自动整理。

## ✨ 它是如何帮助你的？

ClearBOOM会在后台安静地工作，帮你处理下载文件夹中的各种文件。当你下载一个新文件时，它会先静静等待3小时，让你能充分使用这个文件。

3小时后，它会根据文件类型，将文件自动移动到对应的分类文件夹中。整个过程完全自动化，你只需要像往常一样使用电脑就好。

为了确保文件安全，ClearBOOM在移动文件前会创建备份，还会检查文件是否正在使用。如果你想查看整理记录，它也会保存详细的日志。程序本身非常轻量，占用极少的系统资源，你甚至感觉不到它的存在。

## 🔄 工作流程

ClearBOOM的工作流程非常简单（建议全屏查看）：

```
                    3小时等待期
                (可以正常使用文件)
[新文件下载] ==========================================> [开始整理]
                                                          |
                                                          |
                    自动分类整理                           v
[完成归档] <==========================================  [安全检查]
     |                                                    |
     |            ┌──────────────────────────────────────┘
     |            |
     v            v
  [文档]       [媒体]       [压缩包]       [应用]       [开发]
   doc         mp4          zip           exe          py
   pdf         jpg          rar           msi          java
   txt         png          7z            apk          json
   ...         ...          ...           ...          ...
```

## ❓ 常见问题

**Q: 为什么要等待3小时？**  
A: 这是考虑到你可能需要立即使用新下载的文件。等待3小时可以让你有充足的时间使用文件，避免正在使用时被移动。

**Q: 文件会不会丢失？**  
A: 不会。ClearBOOM有完整的备份机制，每次移动前都会创建备份，如果移动失败会自动恢复，所有操作都有日志记录。

**Q: 如何找到整理后的文件？**  
A: 所有文件都在下载文件夹的分类子文件夹中，比如文档在"[DOC] 文档"，图片在"[MEDIA] 媒体"等。你也可以通过Windows搜索功能快速找到文件。

## 📦 开始使用

1. **环境要求**
   - Windows 10/11
   - Python 3.10+
   - 管理员权限（用于设置开机启动）

2. **快速安装**
   ```bash
   # 安装依赖
   pip install -r requirements.txt
   
   # 启动程序
   pythonw file_organizer.py
   ```

程序启动后会在系统托盘显示图标，你可以右键点击图标进行各种设置。

---

## 🔧 系统要求

- **操作系统**：Windows 10 或 Windows 11
- **Python 版本**：Python 3.10 或更高版本
- **管理员权限**：设置开机自启动或特定系统操作时需要管理员权限。

---

## 📦 安装方法

1. **准备 Python 环境**  
   确保已安装 Python 3.10 或更高版本，并正确配置环境变量。

2. **下载项目代码**  
   克隆或直接下载 ClearBOOM 的源码。

3. **安装依赖**  
   在项目根目录运行以下命令安装必要的依赖：
   ```bash
   pip install -r requirements.txt
   ```

4. **运行程序**  
   使用以下命令启动程序：
   ```bash
   pythonw file_organizer.py
   ```

---

## 🚀 快速上手

### 自动整理功能

1. 启动程序后，ClearBOOM 会自动监控下载文件夹，按以下步骤整理文件：
   - **检查文件夹结构**：根据配置规则，自动创建分类文件夹。
   - **整理现有文件**：扫描下载文件夹内的文件，移动到对应分类文件夹。
   - **实时监控**：对下载文件夹中的新文件，实时执行分类操作。

2. 系统托盘功能：
   - **双击托盘图标**：打开主界面。
   - **右键托盘菜单**：可以访问更多操作选项，例如手动整理、查看日志等。

---

## 📁 文件分类规则

ClearBOOM 使用灵活的扩展名映射规则来实现文件分类。以下是默认的分类规则和文件夹结构：

### 默认分类映射

- **[DOC] 文档**  
  包括：`pdf`、`docx`、`xlsx`、`txt` 等。
  - 子分类：`Office`（办公文档）、`PDF`、`Text`（文本文件）、`Book`（电子书）、`Web`（网页相关）。

- **[MEDIA] 媒体**  
  包括：图片（`jpg`、`png`）、视频（`mp4`、`mkv`）、音频（`mp3`、`wav`）等。
  - 子分类：`Video`（视频文件）、`Audio`（音频文件）、`Image`（图片文件）、`Subtitle`（字幕文件）。

- **[APP] 应用**  
  包括：`exe`、`apk`、`iso` 等。
  - 子分类：`Windows`（Windows 程序）、`Mobile`（移动应用）、`Plugin`（插件扩展）、`System`（系统文件）。

- **[ZIP] 压缩包**  
  包括：`zip`、`rar`、`7z`、`tar.gz` 等。
  - 子分类：`ZIP`、`RAR`、`TAR`、`Other`（其他类型的压缩包）。

- **[DEV] 开发**  
  包括：源代码（`py`、`java`）、配置文件（`json`、`yaml`）等。
  - 子分类：`Source`（源码文件）、`Web`（前端开发文件）、`Tool`（工具配置）。

### 自定义规则

你可以通过编辑 `config.py` 文件自定义分类规则，包括：
- 修改分类文件夹名称。
- 自定义扩展名映射。
- 配置子文件夹规则。

---

## 🧹 文件清理功能

ClearBOOM 提供丰富的文件清理功能，支持以下规则：

- **文件年龄清理**：清理超过设定天数（默认 30 天）的旧文件。
- **文件大小限制**：清理超过指定大小的文件（默认 1GB）。
- **按文件类型清理**：支持清理特定扩展名的文件（如 `.tmp`、`.bak`）。
- **排除规则**：设置不清理的文件名模式（如文件名包含“重要”、“保留”）。
- **安全模式**：默认清理的文件会移动到回收站，而非直接删除。

### 配置清理规则

清理功能的详细规则可通过 `config.py` 文件配置：
- 指定清理的文件夹。
- 启用或禁用某些清理规则。
- 设置文件清理的优先级和排除规则。

---

## 🛡️ 安全保护功能

为确保操作安全，ClearBOOM 提供以下保护机制：

1. **受保护文件夹**  
   默认不会整理以下文件夹：
   - `Clash for Windows`  
   - `.minecraft`  
   - `[SCRIPT] 自动整理`  
   - `[BACKUP] 备份`

2. **文件占用检测**  
   跳过正在使用的文件，避免整理失败或误删。

3. **路径安全验证**  
   确保目标路径合法，避免出现文件丢失。

4. **磁盘空间检查**  
   保证剩余磁盘空间不少于 10GB。

5. **智能跳过临时文件**  
   自动忽略 `.tmp`、`.crdownload` 等临时文件。

---

## 📂 项目结构

```plaintext
ClearBOOM/
├── file_organizer.py  # 主程序
├── config.py          # 配置文件
├── gui.py             # 图形界面
├── utils.py           # 工具函数
├── logs/              # 日志文件夹
├── requirements.txt   # 依赖文件
└── README.md          # 说明文档
```

---

## 📝 日志系统

ClearBOOM 会生成详细的操作日志，存储在 `logs/` 文件夹下：
- **整理日志**：记录文件的移动、分类等操作。
- **清理日志**：记录清理规则执行情况及被删除的文件。
- **错误日志**：记录程序运行中出现的异常。

日志支持自动轮转，可根据需要保留或清理旧日志。

---

## ⚠️ 注意事项

1. **首次运行**：需要管理员权限以设置开机自启动。
2. **安全清理模式**：默认启用安全模式，文件会移动到回收站。
3. **配置文件修改**：自定义分类或清理规则需编辑 `config.py` 文件。
4. **文件名冲突**：当移动的文件发生冲突时，程序会自动重命名以避免覆盖。

